<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<title>شبیه‌ساز ارز دیجیتال - فونیکس</title>
<style>
  body { font-family: Tahoma, sans-serif; background: #f9f9f9; text-align:center; padding: 20px; }
  h1 { color: #333; }
  .box { background: #fff; padding: 20px; margin: 20px auto; border-radius: 10px; width: 300px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
  button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
  .top-btn { position: fixed; top: 20px; left: 20px; background: teal; color: white; padding: 10px 20px; border-radius: 8px; z-index: 1000; }
  .invite-btn { position: fixed; top: 70px; left: 20px; background: orange; color: white; padding: 10px 20px; border-radius: 8px; z-index: 1000; }
  .top-btn:hover { background: darkcyan; }
  .invite-btn:hover { background: darkorange; }
</style>
</head>
<body>

<h1>شبیه‌ساز ارز دیجیتال - فونیکس</h1>
<p>کاربر: <span id="username"></span></p>

<button class="top-btn" onclick="addDailyMoney()">پول می‌خوام</button>
<button class="invite-btn" onclick="enterInviteCode()">کد دعوت</button>

<div class="box">
  <div class="crypto-name">فونیکس (Phoenix)</div>
  <p>قیمت: <span id="pricePhoenix">10</span> تومان</p>
  <button onclick="buy()">خرید</button>
  <button onclick="sell()">فروش</button>
  <p>مقدار شما: <span id="cryptoPhoenix">0</span> واحد</p>
</div>

<div class="box">
  <p>پول شما: <span id="money">0</span> تومان</p>
</div>

<script>
// ---------- نام کاربری ----------
let username = localStorage.getItem('username');

if(username){
  alert("نام کاربری وجود دارد: " + username);
} else {
  username = prompt("لطفاً نام کاربری خود را وارد کنید:") || "کاربر ناشناس";
  localStorage.setItem('username', username);
}

document.getElementById('username').innerText = username;

// ---------- پول و ارز ----------
let money = parseFloat(localStorage.getItem('money')) || 0;
let crypto = parseInt(localStorage.getItem('cryptoPhoenix')) || 0;
let pricePhoenix = parseFloat(localStorage.getItem('pricePhoenix')) || 10;

// ---------- جایزه یک‌بار 100 تومنی برای سیکی ----------
let sikyBonusClaimed = JSON.parse(localStorage.getItem('sikyBonusClaimed')) || false;
if(username === 'سیکی' && !sikyBonusClaimed){
  money += 100;
  localStorage.setItem('money', money);
  localStorage.setItem('sikyBonusClaimed', true);
  alert("به کاربر سیکی 100 تومان اضافه شد!");
}

function updateDisplay(){
  document.getElementById('money').innerText = money.toFixed(1);
  document.getElementById('cryptoPhoenix').innerText = crypto;
  document.getElementById('pricePhoenix').innerText = pricePhoenix.toFixed(1);

  localStorage.setItem('money', money);
  localStorage.setItem('cryptoPhoenix', crypto);
  localStorage.setItem('pricePhoenix', pricePhoenix);
}

// ---------- تغییر قیمت اتوماتیک ----------
setInterval(()=>{
  let change = (Math.random()*2-1);
  pricePhoenix = Math.max(1, pricePhoenix + change);
  updateDisplay();
}, 3000);

// ---------- خرید و فروش ----------
function buy(){
  if(money >= pricePhoenix){
    crypto += 1;
    money -= pricePhoenix;
    updateDisplay();
  } else {
    alert("پول کافی نیست!");
  }
}

function sell(){
  if(crypto >= 1){
    crypto -= 1;
    money += pricePhoenix;
    updateDisplay();
  } else {
    alert("هیچ ارزی برای فروش ندارید!");
  }
}

// ---------- دکمه پول روزانه ----------
function addDailyMoney(){
  const today = new Date().toDateString();
  const lastClaim = localStorage.getItem('lastClaim') || "";

  if(lastClaim === today){
    alert("امروز قبلاً پول خود را دریافت کرده‌اید. دوباره فردا تلاش کنید!");
  } else {
    money += 10;
    localStorage.setItem('lastClaim', today);
    updateDisplay();
    alert("10 تومان روزانه به حساب شما اضافه شد!");
  }
}

// ---------- کد دعوت یکبار مصرف ----------
function enterInviteCode(){
  const usedInvites = JSON.parse(localStorage.getItem('usedInvites')) || {};

  const code = prompt("لطفاً کد دعوت را وارد کنید:");
  if(!code) return;

  const validCodes = {
    "FONIKS100": 100, // کد قبلی
    "FONGOL": 10      // کد جدید
  };

  if(validCodes[code]){
    if(usedInvites[code]){
      alert("این کد دعوت قبلاً استفاده شده است!");
      return;
    }
    money += validCodes[code];
    localStorage.setItem('money', money);

    usedInvites[code] = true;
    localStorage.setItem('usedInvites', JSON.stringify(usedInvites));

    updateDisplay();
    alert(`کد درست! ${validCodes[code]} تومان به حساب شما اضافه شد.`);
  } else {
    alert("کد اشتباه است!");
  }
}

updateDisplay();
</script>

</body>
</html>
